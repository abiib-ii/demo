<template>
  <div v-if="modelPlots" class="model-plots-container">
    <h2><span class="section-icon">ğŸ“ˆ</span> æ¨¡å‹å¯è§†åŒ–å›¾è¡¨</h2>
    <div class="plots-description">
      <p>ä»¥ä¸‹å›¾è¡¨å±•ç¤ºäº†æ¨¡å‹çš„å„ç§å¯è§†åŒ–åˆ†æç»“æœï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„æ€§èƒ½å’Œç‰¹å¾å½±å“ã€‚</p>
    </div>
    
    <div class="plots-grid">
      <div class="plot-card">
        <h3><span class="card-icon">ğŸ¯</span> ç‰¹å¾é‡è¦æ€§</h3>
        <p>å±•ç¤ºå„ä¸ªç‰¹å¾å¯¹æ¨¡å‹é¢„æµ‹ç»“æœçš„å½±å“ç¨‹åº¦ã€‚</p>
        <div class="image-container">
          <img :src="'data:image/png;base64,' + modelPlots.feature_importance" alt="ç‰¹å¾é‡è¦æ€§å›¾" />
        </div>
      </div>
      
      <div class="plot-card">
        <h3><span class="card-icon">ğŸ”€</span> æ··æ·†çŸ©é˜µ</h3>
        <p>å±•ç¤ºæ¨¡å‹åœ¨å„ä¸ªå‹åŠ›æ°´å¹³ä¸Šçš„é¢„æµ‹å‡†ç¡®æ€§ã€‚</p>
        <div class="image-container">
          <img :src="'data:image/png;base64,' + modelPlots.confusion_matrix" alt="æ··æ·†çŸ©é˜µ" />
        </div>
      </div>
      
      <div class="plot-card">
        <h3><span class="card-icon">ğŸ“Š</span> ç‰¹å¾åˆ†å¸ƒå›¾</h3>
        <p>å±•ç¤ºä¸åŒå‹åŠ›æ°´å¹³ä¸‹é‡è¦ç‰¹å¾çš„åˆ†å¸ƒæƒ…å†µã€‚</p>
        <div class="image-container">
          <img :src="'data:image/png;base64,' + modelPlots.feature_distribution" alt="ç‰¹å¾åˆ†å¸ƒå›¾" />
        </div>
      </div>
      
      <div class="plot-card">
        <h3><span class="card-icon">ğŸ”</span> é¢„æµ‹ç»“æœåˆ†æ</h3>
        <p>å±•ç¤ºå„ä¸ªå‹åŠ›æ°´å¹³çš„ç²¾ç¡®ç‡ã€å¬å›ç‡å’ŒF1åˆ†æ•°ã€‚</p>
        <div class="image-container">
          <img :src="'data:image/png;base64,' + modelPlots.classification_report" alt="é¢„æµ‹ç»“æœåˆ†æ" />
        </div>
      </div>

      <div class="plot-card">
        <h3><span class="card-icon">ğŸ“‰</span> AUC-ROC æ›²çº¿</h3>
        <p>å±•ç¤ºæ¨¡å‹åœ¨æ‰€æœ‰ç±»åˆ«ä¸Šçš„æ¥æ”¶è€…æ“ä½œç‰¹å¾æ›²çº¿ (ROC) å’Œæ›²çº¿ä¸‹é¢ç§¯ (AUC)ã€‚</p>
        <div class="image-container">
          <img :src="'data:image/png;base64,' + modelPlots.auc_roc_curve" alt="AUC-ROC æ›²çº¿å›¾" />
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'ModelPlots',
  props: {
    modelPlots: {
      type: Object,
      default: null
    }
  }
}
</script>

<style scoped>
.model-plots-container {
  background-color: white;
  border-radius: 12px;
  padding: 25px;
  margin-top: 20px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  text-align: left;
  transition: all 0.3s ease;
  border: 1px solid #f0f0f0;
}

.model-plots-container:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.12);
}

.section-icon {
  margin-right: 10px;
  font-size: 1.4em;
  display: inline-block;
  animation: wave-icon 2.5s infinite;
}

@keyframes wave-icon {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(10deg); }
  75% { transform: rotate(-10deg); }
}

.model-plots-container h2 {
  color: #3a7bd5;
  font-size: 1.8rem;
  margin-top: 0;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid #f0f0f0;
  position: relative;
}

.model-plots-container h2::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 80px;
  height: 2px;
  background-color: #3a7bd5;
  transition: width 0.3s ease;
}

.model-plots-container:hover h2::after {
  width: 150px;
}

.plots-description {
  background-color: #f8f9fa;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 25px;
  border-left: 4px solid #3a7bd5;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.plots-description p {
  margin: 0;
  line-height: 1.6;
  color: #555;
  font-size: 0.95rem;
}

.plots-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); /* Adjusted minmax for better fit */
  gap: 25px; /* Increased gap */
}

.plot-card {
  background-color: white;
  border-radius: 10px;
  padding: 20px; /* Increased padding */
  box-shadow: 0 4px 12px rgba(0,0,0,0.07); /* Softer shadow */
  border: 1px solid #e9ecef;
  transition: all 0.3s ease-in-out;
  display: flex;
  flex-direction: column;
}

.plot-card:hover {
  transform: translateY(-8px) scale(1.02); /* Enhanced hover effect */
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

.card-icon {
  margin-right: 8px;
  font-size: 1.1em;
}

.plot-card h3 {
  color: #3a7bd5;
  margin-top: 0;
  margin-bottom: 10px; /* Adjusted margin */
  font-size: 1.3rem; /* Slightly larger card title */
  display: flex;
  align-items: center;
}

.plot-card p {
  margin-bottom: 15px;
  color: #666;
  font-size: 0.9rem; /* Slightly smaller description text */
  line-height: 1.5;
  flex-grow: 1; /* Allows description to take available space */
}

.image-container {
  overflow: hidden;
  border-radius: 8px; /* Consistent with card radius */
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  margin-top: auto; /* Pushes image to the bottom if text is short */
}

.plot-card:hover .image-container {
  transform: scale(1.03); /* Slightly more pronounced scale on card hover */
  box-shadow: 0 6px 12px rgba(0,0,0,0.12);
}

.plot-card img {
  width: 100%;
  height: auto; /* Ensure aspect ratio is maintained */
  display: block; /* Removes extra space below image */
  border-radius: 8px; /* Match container radius */
  /* Removed individual image shadow as container has one */
}

@media (max-width: 992px) { /* Adjusted breakpoint for better responsiveness */
  .plots-grid {
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
}

@media (max-width: 768px) {
  .plots-grid {
    grid-template-columns: 1fr; /* Single column on smaller screens */
  }
  .model-plots-container {
    padding: 15px;
  }
  .plot-card {
    padding: 15px;
  }
}
</style>